const translations = {
    '': {  // Bulgarian translations
        // General
        title: "Създайте своята персонализирана фигура",
        step1: "Снимка",
        step2: "Детайли на фигурата",
        step3: "Визуализация",
        step4: "Контакт & Доставка",
        next: "Напред",
        previous: "Назад",

        // Step 1
        uploadPhoto: "Качете своята снимка",
        uploadPhotoDesc: "Моля, качете ясна снимка на лицето си. Тя ще бъде използвана за създаване на вашата персонализирана фигура.",
        selectFromGallery: "Изберете от галерията",
        fileRequirements: "JPEG или PNG, макс. 10MB",
        removePhoto: "Премахни снимката",
        photoError: "Моля, качете JPEG или PNG файл.",
        fileSizeError: "Размерът на файла трябва да е по-малък от 10MB.",

        // Step 2
        figureDetails: "Детайли на фигурата",
        clothesDescription: "Описание на облеклото",
        clothesDescriptionPlaceholder: "Опишете облеклото, което искате да носите...",
        clothesError: "Описанието трябва да е поне 8 символа.",
        selectPose: "Изберете поза",
        selectStyle: "Изберете стил",
        poseError: "Моля, изберете поза.",
        styleError: "Моля, изберете стил.",

        // Step 3
        previewTitle: "Визуализация на фигурата",
        generatePreview: "Генерирай визуализация",
        previewLoading: "Генериране на визуализацията...",
        previewError: "Не успяхме да генерираме модела. Моля, опитайте отново.",
        retryPreview: "Опитайте отново",
        previewInfo: "Така ще изглежда вашата реална, физическа 3D фигура – ще бъде изработена и ръчно изрисувана специално за вас!",

        // Step 4
        contactShipping: "Контакт & Доставка",
        contactInfo: "Контактна информация",
        shippingInfo: "Адрес за доставка",
        fullName: "Пълно име",
        email: "Имейл адрес",
        phone: "Телефонен номер",
        address: "Адрес",
        country: "Държава",
        city: "Град",
        postcode: "Пощенски код",
        selectSize: "Изберете размер",
        nameError: "Моля, въведете пълното си име.",
        emailError: "Моля, въведете валиден имейл адрес.",
        phoneError: "Моля, въведете валиден телефонен номер.",
        addressError: "Моля, въведете вашия адрес.",
        countryError: "Моля, въведете вашата държава.",
        cityError: "Моля, въведете вашия град.",
        postcodeError: "Моля, въведете вашия пощенски код.",
        submit: "Изпрати поръчка",
        submitting: "Изпращане...",
        processingOrder: "Обработка на вашата поръчка...",
        orderSuccess: "Поръчката е изпратена успешно!",
        orderSuccessMessage: "Благодарим за поръчката. Скоро ще се свържем с вас с повече детайли.",
        errorTitle: "Нещо се обърка",
        submissionError: "Възникна грешка при изпращането на поръчката. Моля, опитайте отново.",
        retrySubmission: "Опитайте отново",

        // Banned message
        bannedMessage: "Вашият IP адрес е блокиран. Моля, свържете се с нас за повече информация. 0897858684"
    },
    en: {
        // General
        title: "Create Your Custom Figure",
        step1: "Photo",
        step2: "Figure Details",
        step3: "Preview",
        step4: "Contact & Shipping",
        next: "Next",
        previous: "Previous",

        // Step 1
        uploadPhoto: "Upload Your Photo",
        uploadPhotoDesc: "Please upload a clear photo of your face. It will be used to create your custom figure.",
        selectFromGallery: "Select from gallery",
        fileRequirements: "JPEG or PNG, max 10MB",
        removePhoto: "Remove Photo",
        photoError: "Please upload a JPEG or PNG file.",
        fileSizeError: "File size must be less than 10MB.",

        // Step 2
        figureDetails: "Figure Details",
        clothesDescription: "Clothes Description",
        clothesDescriptionPlaceholder: "Describe the clothes you want to wear...",
        clothesError: "Description must be at least 8 characters.",
        selectPose: "Select Pose",
        selectStyle: "Select Style",
        poseError: "Please select a pose.",
        styleError: "Please select a style.",

        // Step 3
        previewTitle: "Preview Your Figure",
        generatePreview: "Generate Preview",
        previewLoading: "Generating your preview...",
        previewError: "We couldn't generate the model. Please try again.",
        retryPreview: "Try Again",
        previewInfo: "This is how your real, physical 3D figure will look – it will be crafted and hand-painted especially for you!",

        // Step 4
        contactShipping: "Contact & Shipping",
        contactInfo: "Contact Information",
        shippingInfo: "Shipping Address",
        fullName: "Full Name",
        email: "Email Address",
        phone: "Phone Number",
        address: "Address",
        country: "Country",
        city: "City",
        postcode: "Postal Code",
        selectSize: "Select Size",
        nameError: "Please enter your full name.",
        emailError: "Please enter a valid email address.",
        phoneError: "Please enter a valid phone number.",
        addressError: "Please enter your address.",
        countryError: "Please enter your country.",
        cityError: "Please enter your city.",
        postcodeError: "Please enter your postal code.",
        submit: "Submit Order",
        submitting: "Submitting...",
        processingOrder: "Processing your order...",
        orderSuccess: "Order Submitted Successfully!",
        orderSuccessMessage: "Thank you for your order. We will contact you soon with more details.",
        errorTitle: "Something went wrong",
        submissionError: "An error occurred while submitting your order. Please try again.",
        retrySubmission: "Try Again",

        // Banned message
        bannedMessage: "Your IP address is blocked. Please contact us for more information. 0897858684"
    },
    de: {
        // General
        title: "Erstellen Sie Ihre maßgeschneiderte Figur",
        step1: "Foto",
        step2: "Figurendetails",
        step3: "Vorschau",
        step4: "Kontakt & Versand",
        next: "Weiter",
        previous: "Zurück",

        // Step 1
        uploadPhoto: "Laden Sie Ihr Foto hoch",
        uploadPhotoDesc: "Bitte laden Sie ein klares Foto Ihres Gesichts hoch. Es wird verwendet, um Ihre maßgeschneiderte Figur zu erstellen.",
        selectFromGallery: "Aus der Galerie auswählen",
        fileRequirements: "JPEG oder PNG, max. 10MB",
        removePhoto: "Foto entfernen",
        photoError: "Bitte laden Sie eine JPEG- oder PNG-Datei hoch.",
        fileSizeError: "Die Dateigröße muss weniger als 10MB betragen.",

        // Step 2
        figureDetails: "Figurendetails",
        clothesDescription: "Kleidungsbeschreibung",
        clothesDescriptionPlaceholder: "Beschreiben Sie die Kleidung, die Sie tragen möchten...",
        clothesError: "Die Beschreibung muss mindestens 8 Zeichen lang sein.",
        selectPose: "Pose auswählen",
        selectStyle: "Stil auswählen",
        poseError: "Bitte wählen Sie eine Pose aus.",
        styleError: "Bitte wählen Sie einen Stil aus.",

        // Step 3
        previewTitle: "Vorschau Ihrer Figur",
        generatePreview: "Vorschau generieren",
        previewLoading: "Ihre Vorschau wird generiert...",
        previewError: "Wir konnten das Modell nicht generieren. Bitte versuchen Sie es erneut.",
        retryPreview: "Erneut versuchen",
        previewInfo: "So wird Ihre echte, physische 3D-Figur aussehen – sie wird speziell für Sie angefertigt und handbemalt!",

        // Step 4
        contactShipping: "Kontakt & Versand",
        contactInfo: "Kontaktinformationen",
        shippingInfo: "Lieferadresse",
        fullName: "Vollständiger Name",
        email: "E-Mail-Adresse",
        phone: "Telefonnummer",
        address: "Adresse",
        country: "Land",
        city: "Stadt",
        postcode: "Postleitzahl",
        selectSize: "Größe auswählen",
        nameError: "Bitte geben Sie Ihren vollständigen Namen ein.",
        emailError: "Bitte geben Sie eine gültige E-Mail-Adresse ein.",
        phoneError: "Bitte geben Sie eine gültige Telefonnummer ein.",
        addressError: "Bitte geben Sie Ihre Adresse ein.",
        countryError: "Bitte geben Sie Ihr Land ein.",
        cityError: "Bitte geben Sie Ihre Stadt ein.",
        postcodeError: "Bitte geben Sie Ihre Postleitzahl ein.",
        submit: "Bestellung absenden",
        submitting: "Wird gesendet...",
        processingOrder: "Ihre Bestellung wird verarbeitet...",
        orderSuccess: "Bestellung erfolgreich gesendet!",
        orderSuccessMessage: "Vielen Dank für Ihre Bestellung. Wir werden Sie in Kürze mit weiteren Details kontaktieren.",
        errorTitle: "Etwas ist schiefgelaufen",
        submissionError: "Bei der Bestellung ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.",
        retrySubmission: "Erneut versuchen",

        // Banned message
        bannedMessage: "Ihre IP-Adresse wurde blockiert. Bitte kontaktieren Sie uns für weitere Informationen. 0897858684"
    }
};

// Function to get current language from URL
function getCurrentLanguage() {
    const urlParams = new URLSearchParams(window.location.search);
    const lang = urlParams.get('lang');
    if (lang === 'de') return 'de';
    if (lang === 'en') return 'en';
    return ''; // Default to Bulgarian
}

// Function to switch language
function switchLanguage(lang) {
    const url = new URL(window.location.href);
    url.searchParams.set('lang', lang);
    window.location.href = url.toString();
}

// Function to get translation
function t(key) {
    const lang = getCurrentLanguage();
    return translations[lang]?.[key] || key;
}

// Function to show language selection modal
function showLanguageModal() {
    const modal = document.getElementById('languageModal');
    if (modal) {
        modal.style.display = 'flex';
    }
}

// Function to update all text content
function updateLanguage() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });

    // Update all placeholders with data-i18n-placeholder attribute
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });

    // Update HTML lang attribute
    const lang = getCurrentLanguage();
    document.documentElement.lang = lang || 'bg';
}

// Export functions
window.i18n = {
    t,
    updateLanguage,
    getCurrentLanguage,
    switchLanguage,
    showLanguageModal
};

// Show language modal when page loads
document.addEventListener('DOMContentLoaded', () => {
    // Only show modal if no language is selected
    if (!window.location.search.includes('lang=')) {
        showLanguageModal();
    }
    updateLanguage();
}); 